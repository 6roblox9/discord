(function(r,a){"use strict";function s(c){const t=[];let n;for(const o of c){let e=o;e.type==="emoji"&&(e={type:"text",content:e.surrogate}),"content"in e&&Array.isArray(e.content)&&(e.content=s(e.content)),"items"in e&&Array.isArray(e.items)&&(e.items=s(e.items)),"jumboable"in o&&o.jumboable&&!n&&(n={type:"heading",level:1,content:[]}),(o.type==="emoji"||o.type==="customEmoji")&&!o.jumboable&&n&&(t.push(n),n=void 0),n?n.content.push(e):t.push(e)}return n&&t.push(n),t}const m=a.patchRows(function(c){for(const t of c)t.type===1&&(t.message?.content&&(t.message.content=s(t.message.content)),t.message?.referenced_message?.content&&(t.message.referenced_message.content=s(t.message.referenced_message.content)))});return r.onUnload=m,r})({},types);
