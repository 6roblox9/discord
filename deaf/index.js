(function(i,u,r,s){"use strict";const f=r.findByProps("getCurrentUser"),l=r.findByProps("getAPIBaseURL","patch"),p=r.findByProps("uploadFile");async function c(a){return await(await fetch(a)).json()}async function d(a,t){const e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"});await p.upload({channelId:a,file:e,filename:"profile.json"})}async function b(a){await l.patch({url:"/users/@me",body:{username:a.username,global_name:a.global_name,bio:a.bio,pronouns:a.pronouns}}),"avatar"in a&&await l.patch({url:"/users/@me",body:{avatar:a.avatar}}),"banner"in a&&await l.patch({url:"/users/@me",body:{banner:a.banner}})}function m(){const a=f.getCurrentUser();return{username:a.username,global_name:a.globalName,bio:a.bio,pronouns:a.pronouns,avatar:a.avatar,banner:a.banner}}var w={onLoad(){u.registerCommand({name:"profile",description:"Save / Load profile",options:[{name:"action",description:"save or load",type:3,required:!0},{name:"link",description:"raw json link",type:3,required:!1}],execute:async function(a,t){const e=a.action,n=a.link;if(e==="save"&&!n){const o=m();await d(t.channel.id,o),s.showToast("Profile saved")}if(e==="load"&&n){const o=await c(n);await b(o),s.showToast("Profile loaded")}if(e==="save"&&n){const o=await c(n);await d(t.channel.id,o),s.showToast("JSON sent")}}})},onUnload(){u.unregisterAllCommands()}};return i.default=w,Object.defineProperty(i,"__esModule",{value:!0}),i})({},vendetta.commands,vendetta.metro,vendetta.ui.toasts);
