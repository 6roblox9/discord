(function(g,c,E,i,u,e){"use strict";function S(){const[a,o]=e.React.useState((u.storage.userIds??[]).join(",")),[t,n]=e.React.useState(u.storage.trackFriends??!0);function s(){u.storage.userIds=a.split(",").map(function(r){return r.trim()}).filter(Boolean),u.storage.trackFriends=t,i.showToast("settings applied")}return e.React.createElement(e.ReactNative.ScrollView,{style:{flex:1,padding:16,backgroundColor:"#2f3136"}},e.React.createElement(e.ReactNative.Text,{style:{color:"#fff",fontSize:16,marginBottom:6}},"Track Friends"),e.React.createElement(e.ReactNative.Switch,{value:t,onValueChange:n,style:{marginBottom:16}}),e.React.createElement(e.ReactNative.Text,{style:{color:"#fff",fontSize:16,marginBottom:6}},"Specific User IDs"),e.React.createElement(e.ReactNative.TextInput,{value:a,onChangeText:o,placeholder:"123, 456, 789",placeholderTextColor:"#aaa",style:{borderWidth:1,borderColor:"#7289da",padding:10,borderRadius:8,color:"#fff",backgroundColor:"#202225",marginBottom:16}}),e.React.createElement(e.ReactNative.TouchableOpacity,{onPress:s,style:{backgroundColor:"#7289da",paddingVertical:12,borderRadius:8,alignItems:"center"}},e.React.createElement(e.ReactNative.Text,{style:{color:"#fff",fontSize:16,fontWeight:"bold"}},"Apply")))}const l=c.findByProps("dispatch","subscribe"),v=c.findByProps("getStatus"),$=c.findByProps("getFriendIDs"),h=c.findByProps("getChannel"),T=c.findByProps("getGuild"),C=c.findByProps("getUser"),p={},f=function(){const a=new Set;if(u.storage.trackFriends)for(const o of $.getFriendIDs())a.add(o);for(const o of u.storage.userIds??[])a.add(o);return[...a]},d=function(a){return C.getUser(a)?.username??a};let R=null,y=null,b=null;var _={onLoad(){for(const t of f())p[t]=v.getStatus(t);R=E.after("dispatch",l,function([t]){if(t?.type!=="PRESENCE_UPDATE")return;const n=t.user?.id;f().includes(n)&&p[n]!==t.status&&(p[n]=t.status,i.showToast(`${d(n)} is now ${t.status}`))});const a=function(t){const n=t?.message,s=n?.author?.id;if(!f().includes(s))return;const r=h.getChannel(n.channel_id);if(r)if(r.guild_id){const w=T.getGuild(r.guild_id);i.showToast(`${d(s)} sent message in ${w?.name} #${r.name}`)}else r.type===3?i.showToast(`${d(s)} sent message in group`):i.showToast(`${d(s)} sent message in DM`)},o=function(t){const n=t?.userId;if(!f().includes(n))return;const s=h.getChannel(t.channelId);if(s)if(s.guild_id){const r=T.getGuild(s.guild_id);i.showToast(`${d(n)} typing in ${r?.name} #${s.name}`)}else s.type===3?i.showToast(`${d(n)} typing in group`):i.showToast(`${d(n)} typing in DM`)};l.subscribe("MESSAGE_CREATE",a),l.subscribe("TYPING_START",o),y=function(){return l.unsubscribe("MESSAGE_CREATE",a)},b=function(){return l.unsubscribe("TYPING_START",o)}},onUnload(){R?.(),y?.(),b?.()},settings:S};return g.default=_,Object.defineProperty(g,"__esModule",{value:!0}),g})({},vendetta.metro,vendetta.patcher,vendetta.ui.toasts,vendetta.plugin,vendetta.metro.common);
