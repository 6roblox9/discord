(function(f,h,n,e,p){"use strict";function b(){p.useProxy(n.storage);const a=n.storage.logs||[];return e.React.createElement(e.ReactNative.View,{style:{flex:1,backgroundColor:"#202225"}},e.React.createElement(e.ReactNative.View,{style:{padding:16,borderBottomWidth:1,borderBottomColor:"#2f3136"}},e.React.createElement(e.ReactNative.Text,{style:{color:"#fff",fontSize:20,fontWeight:"bold"}},"Quest Logs")),e.React.createElement(e.ReactNative.ScrollView,{style:{flex:1,padding:12},contentContainerStyle:{paddingBottom:20}},a.length===0?e.React.createElement(e.ReactNative.Text,{style:{color:"#8e9297",textAlign:"center",marginTop:20}},"Waiting for tasks..."):a.map(function(t,s){return e.React.createElement(e.ReactNative.View,{key:s,style:{marginBottom:6,flexDirection:"row",flexWrap:"wrap"}},e.React.createElement(e.ReactNative.Text,{style:{color:"#72767d",fontSize:12,width:85}},"[",t.time,"]"),e.React.createElement(e.ReactNative.Text,{style:{color:t.color,fontWeight:"500",flex:1}},t.message))})),e.React.createElement(e.ReactNative.TouchableOpacity,{onPress:function(){n.storage.logs=[]},style:{backgroundColor:"#f04747",margin:16,padding:12,borderRadius:8,alignItems:"center"}},e.React.createElement(e.ReactNative.Text,{style:{color:"#fff",fontWeight:"bold"}},"Clear Logs")))}const v=h.findByProps("getToken").getToken,g={os:"Windows",browser:"Discord Client",release_channel:"stable",client_version:"1.0.9215",os_version:"10.0.19045",os_arch:"x64",app_arch:"x64",system_locale:"en-US",has_client_mods:!1,client_launch_id:Math.random().toString(36),browser_user_agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) discord/1.0.9215 Chrome/138.0.7204.251 Electron/37.6.0 Safari/537.36",browser_version:"37.6.0",os_sdk_version:"19045",client_build_number:471091,native_build_number:72186,client_event_source:null,launch_signature:Math.random().toString(36),client_heartbeat_session_id:Math.random().toString(36),client_app_state:"focused"},w=btoa(JSON.stringify(g));function r(a,t){const s={time:new Date().toLocaleTimeString(),color:a,message:t};n.storage.logs||(n.storage.logs=[]),n.storage.logs.push(s)}async function c(a,t="GET",s){const i=v();return(await fetch(`https://discord.com/api/v10${a}`,{method:t,headers:{Authorization:i,"Content-Type":"application/json","x-super-properties":w,"User-Agent":g.browser_user_agent},body:s?JSON.stringify(s):void 0})).json()}async function y(){n.storage.logs=[],r("#36e333","Checking for quests...");try{const a=((await c("/quests/@me")).quests||[]).filter(function(t){return!t.user_status?.completed_at&&new Date(t.config.expires_at)>new Date});if(a.length===0){r("#faa81a","No active quests found.");return}r("#00bfff",`Found ${a.length} quests.`);for(const t of a){const s=t.config.messages.quest_name,i=t.id;t.user_status?.enrolled_at||(await c(`/quests/${i}/enroll`,"POST",{location:11,is_targeted:!1,metadata_raw:null}),r("#00ff7f",`Enrolled in: ${s}`));const T=Object.keys(t.config.task_config.tasks);for(const o of T){const _=t.config.task_config.tasks[o].target;let l=t.user_status?.progress?.[o]?.value||0;for(r("#ffeb3b",`Starting task: ${o} for ${s}`);l<_;)if(o.includes("WATCH_VIDEO")){const d=await c(`/quests/${i}/video-progress`,"POST",{timestamp:Math.min(_,l+7)});if(l+=7,d.completed_at)break;await new Promise(function(u){return setTimeout(u,2500)})}else{const d=await c(`/quests/${i}/heartbeat`,"POST",{application_id:t.config.application.id,terminal:!1});if(l=d.progress?.[o]?.value||l,d.completed_at)break;await new Promise(function(u){return setTimeout(u,3e4)})}r("#36e333",`Finished task: ${o}`)}}r("#36e333","All quests completed!")}catch(a){r("#ff4747",`Error: ${a.message}`)}}var R={onLoad(){y()},onUnload(){},settings:b};return f.default=R,Object.defineProperty(f,"__esModule",{value:!0}),f})({},vendetta.metro,vendetta.plugin,vendetta.metro.common,vendetta.storage);
