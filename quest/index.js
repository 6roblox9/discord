(function(l,i,h,o,s,e){"use strict";function p(){const[n,r]=e.React.useState((s.storage.userIds??[]).join(",")),[t,a]=e.React.useState(s.storage.trackFriends??!0);function c(){s.storage.userIds=n.split(",").map(function(g){return g.trim()}).filter(Boolean),s.storage.trackFriends=t,o.showToast("settings applied")}return e.React.createElement(e.ReactNative.ScrollView,{style:{flex:1,padding:16,backgroundColor:"#2f3136"}},e.React.createElement(e.ReactNative.Text,{style:{color:"#fff",fontSize:16,marginBottom:6}},"Track Friends"),e.React.createElement(e.ReactNative.Switch,{value:t,onValueChange:a,style:{marginBottom:16}}),e.React.createElement(e.ReactNative.Text,{style:{color:"#fff",fontSize:16,marginBottom:6}},"Specific User IDs"),e.React.createElement(e.ReactNative.TextInput,{value:n,onChangeText:r,placeholder:"123, 456, 789",placeholderTextColor:"#aaa",style:{borderWidth:1,borderColor:"#7289da",padding:10,borderRadius:8,color:"#fff",backgroundColor:"#202225",marginBottom:16}}),e.React.createElement(e.ReactNative.TouchableOpacity,{onPress:c,style:{backgroundColor:"#7289da",paddingVertical:12,borderRadius:8,alignItems:"center"}},e.React.createElement(e.ReactNative.Text,{style:{color:"#fff",fontSize:16,fontWeight:"bold"}},"Apply")))}const d=i.findByProps("dispatch","subscribe"),E=i.findByProps("getStatus"),S=i.findByProps("getFriendIDs"),y=i.findByProps("getChannel"),v=i.findByProps("getGuild"),f={},u=function(){const n=new Set;if(s.storage.trackFriends)for(const r of S.getFriendIDs())n.add(r);for(const r of s.storage.userIds??[])n.add(r);return[...n]};let R=null,T=null,b=null;var C={onLoad(){for(const t of u())f[t]=E.getStatus(t);R=h.after("dispatch",d,function([t]){if(t?.type!=="PRESENCE_UPDATE")return;const a=t.user?.id;u().includes(a)&&f[a]!==t.status&&(f[a]=t.status,o.showToast(`user ${a} is now ${t.status}`))});const n=function(t){const a=t?.message?.author?.id;u().includes(a)&&o.showToast(`user ${a} sent a message`)},r=function(t){const a=t?.userId;if(!u().includes(a))return;const c=y.getChannel(t.channelId);if(c)if(c.guild_id){const g=v.getGuild(c.guild_id);o.showToast(`user ${a} typing in ${g?.name??"server"}`)}else o.showToast(`user ${a} typing in DM`)};d.subscribe("MESSAGE_CREATE",n),d.subscribe("TYPING_START",r),T=function(){return d.unsubscribe("MESSAGE_CREATE",n)},b=function(){return d.unsubscribe("TYPING_START",r)}},onUnload(){R?.(),T?.(),b?.()},settings:p};return l.default=C,Object.defineProperty(l,"__esModule",{value:!0}),l})({},vendetta.metro,vendetta.patcher,vendetta.ui.toasts,vendetta.plugin,vendetta.metro.common);
