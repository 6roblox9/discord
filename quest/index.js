(function(g,p,c,a,w){"use strict";function h(){w.useProxy(c.storage);const t=c.storage.logs||[];return a.React.createElement(a.ReactNative.SafeAreaView,{style:{flex:1,backgroundColor:"#202225"}},a.React.createElement(a.ReactNative.View,{style:{padding:16,borderBottomWidth:1,borderBottomColor:"#2f3136"}},a.React.createElement(a.ReactNative.Text,{style:{color:"#fff",fontSize:20,fontWeight:"bold"}},"Quest Autocompleter")),a.React.createElement(a.ReactNative.ScrollView,{style:{flex:1},contentContainerStyle:{padding:12,paddingBottom:100}},t.length===0?a.React.createElement(a.ReactNative.Text,{style:{color:"#8e9297",textAlign:"center",marginTop:20}},"No logs yet..."):t.map(function(e,n){return a.React.createElement(a.ReactNative.View,{key:n,style:{marginBottom:6,flexDirection:"row"}},a.React.createElement(a.ReactNative.Text,{style:{color:"#72767d",fontSize:11,width:80}},"[",e.time,"]"),a.React.createElement(a.ReactNative.Text,{style:{color:e.color,fontWeight:"500",flex:1}},e.message))})),a.React.createElement(a.ReactNative.View,{style:{position:"absolute",bottom:0,left:0,right:0,backgroundColor:"#202225",padding:16}},a.React.createElement(a.ReactNative.TouchableOpacity,{onPress:function(){c.storage.logs=[]},style:{backgroundColor:"#f04747",padding:14,borderRadius:8,alignItems:"center",elevation:5}},a.React.createElement(a.ReactNative.Text,{style:{color:"#fff",fontWeight:"bold"}},"Clear Logs"))))}const b=p.findByProps("getToken").getToken,_={os:"Windows",browser:"Discord Client",release_channel:"stable",client_version:"1.0.9215",os_version:"10.0.19045",os_arch:"x64",app_arch:"x64",system_locale:"en-US",has_client_mods:!1,client_launch_id:Math.random().toString(36),browser_user_agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) discord/1.0.9215 Chrome/138.0.7204.251 Electron/37.6.0 Safari/537.36",browser_version:"37.6.0",os_sdk_version:"19045",client_build_number:471091,native_build_number:72186,client_event_source:null,launch_signature:Math.random().toString(36),client_heartbeat_session_id:Math.random().toString(36),client_app_state:"focused"},y=btoa(JSON.stringify(_));function i(t,e){const n=new Date().toLocaleTimeString();c.storage.logs||(c.storage.logs=[]),c.storage.logs.push({time:n,color:t,message:e})}const u=function(t){return new Promise(function(e){return setTimeout(e,t)})};async function v(t,e=5){for(let n=0;n<e;n++)try{return await t()}catch{await u(3e3)}}async function l(t,e="GET",n){const o=b();return(await v(function(){return fetch(`https://discord.com/api/v10${t}`,{method:e,headers:{Authorization:o,"Content-Type":"application/json","x-super-properties":y,"User-Agent":_.browser_user_agent},body:n?JSON.stringify(n):void 0})})).json()}async function m(t){return((await l("/quests/@me")).quests||[]).find(function(e){return e.id===t})}async function R(t,e){const n=t.config.messages.quest_name,o=t.id,s=t.config.task_config.tasks[e].target;let r=t.user_status?.progress?.[e]?.value||0,f=0;if(i("#faa81a",`${n} type: ${e}`),e.includes("WATCH_VIDEO"))for(;r<s;){const d=await l(`/quests/${o}/video-progress`,"POST",{timestamp:Math.min(s,r+7+Math.random())});if(r+=7,Date.now()-f>=1e4&&(i("#00bfff",`${n} ${Math.min(r,s)}/${s} remaining ${Math.max(0,s-r)}`),f=Date.now()),d.completed_at)break;await u(2e3)}else{for(;;){const d=await l(`/quests/${o}/heartbeat`,"POST",{application_id:t.config.application.id,terminal:!1});if(r=d.progress?.[e]?.value||r,Date.now()-f>=1e4&&(i("#00bfff",`${n} ${r}/${s} remaining ${Math.max(0,s-r)}`),f=Date.now()),d.completed_at)break;await u(3e4)}await l(`/quests/${o}/heartbeat`,"POST",{application_id:t.config.application.id,terminal:!0})}i("#36e333",`${n} ${e} completed`)}async function $(t){let e=t;for(e.user_status?.enrolled_at||await l(`/quests/${e.id}/enroll`,"POST",{location:11,is_targeted:!1,metadata_raw:null});e=await m(e.id),!(!e||e.user_status?.completed_at);){const n=Object.keys(e.config.task_config.tasks).filter(function(o){const s=e.config.task_config.tasks[o].target;return(e.user_status?.progress?.[o]?.value||0)<s});if(!n.length)break;await R(e,n[0]),await u(3e3)}i("#36e333",`${e.config.messages.quest_name} fully completed`)}async function k(){c.storage.logs=[];try{const t=await l("/users/@me");for(i("#36e333",`Logged ${t.username}#${t.discriminator}`);;){const e=((await l("/quests/@me")).quests||[]).filter(function(n){return!n.user_status?.completed_at&&new Date(n.config.expires_at)>new Date});if(e.length===0)break;i("#faa81a",`Quests remaining: ${e.length}`),await $(e[0]),await u(3e3)}i("#36e333","All quests finished")}catch(t){i("#ff4747",`Error: ${t.message}`)}}var T={onLoad(){k()},onUnload(){},settings:h};return g.default=T,Object.defineProperty(g,"__esModule",{value:!0}),g})({},vendetta.metro,vendetta.plugin,vendetta.metro.common,vendetta.storage);
