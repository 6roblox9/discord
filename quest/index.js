(function(R,s,C,b,x,v,u){"use strict";function D(){const[e,t]=u.React.useState(s.storage.logs||[]),[a,n]=u.React.useState(!1),r=function(){n(!0),t([...s.storage.logs||[]]),setTimeout(function(){return n(!1)},500)},l=function(){s.storage.logs=[],t([]),b.showToast("\u062A\u0645 \u0645\u0633\u062D \u0627\u0644\u0633\u062C\u0644\u0627\u062A",v.getAssetIDByName("ic_message_delete"))};return u.React.createElement(u.ReactNative.ScrollView,{style:{flex:1,backgroundColor:"#2f3136",padding:16},refreshControl:u.React.createElement(u.ReactNative.RefreshControl,{refreshing:a,onRefresh:r,tintColor:"#7289da",colors:["#7289da"]})},u.React.createElement(u.ReactNative.View,{style:{marginBottom:20}},u.React.createElement(u.ReactNative.View,{style:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:16}},u.React.createElement(u.ReactNative.Text,{style:{color:"#fff",fontSize:24,fontWeight:"bold"}},"\u0633\u062C\u0644\u0627\u062A \u0627\u0644\u0643\u0648\u064A\u0633\u062A\u0627\u062A \u{1F3AE}"),u.React.createElement(u.ReactNative.TouchableOpacity,{onPress:l,style:{backgroundColor:"#ed4245",paddingHorizontal:16,paddingVertical:8,borderRadius:8,flexDirection:"row",alignItems:"center"}},u.React.createElement(u.ReactNative.Text,{style:{color:"#fff",fontWeight:"bold",marginLeft:8}},"\u0645\u0633\u062D \u0627\u0644\u0633\u062C\u0644\u0627\u062A"))),u.React.createElement(u.ReactNative.Text,{style:{color:"#b9bbbe",fontSize:14,marginBottom:12}},e.length===0?"\u0644\u0627 \u062A\u0648\u062C\u062F \u0633\u062C\u0644\u0627\u062A":`\u0639\u062F\u062F \u0627\u0644\u0633\u062C\u0644\u0627\u062A: ${e.length}`)),e.length===0?u.React.createElement(u.ReactNative.View,{style:{alignItems:"center",justifyContent:"center",paddingVertical:40}},u.React.createElement(u.ReactNative.Text,{style:{color:"#72767d",fontSize:16,textAlign:"center"}},"\u{1F4DD} \u0644\u0627 \u062A\u0648\u062C\u062F \u0633\u062C\u0644\u0627\u062A \u062D\u0627\u0644\u064A\u0627\u064B")):u.React.createElement(u.ReactNative.View,{style:{backgroundColor:"#202225",borderRadius:12,overflow:"hidden"}},e.map(function(d,o){return u.React.createElement(u.ReactNative.View,{key:o,style:{padding:12,borderBottomWidth:o===e.length-1?0:1,borderBottomColor:"#2f3136",backgroundColor:o%2===0?"#202225":"#25272b"}},u.React.createElement(u.ReactNative.Text,{style:{color:"#dcddde",fontSize:14,fontFamily:"monospace",lineHeight:20}},d))})),u.React.createElement(u.ReactNative.View,{style:{backgroundColor:"#202225",borderRadius:12,padding:16,marginTop:20}},u.React.createElement(u.ReactNative.Text,{style:{color:"#fff",fontSize:18,fontWeight:"bold",marginBottom:12}},"\u{1F4D6} \u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0628\u0644\u0648\u0642\u0646"),u.React.createElement(u.ReactNative.View,{style:{marginBottom:8}},u.React.createElement(u.ReactNative.Text,{style:{color:"#00bfff",fontSize:16,marginBottom:4}},"\u{1F680} \u0627\u0644\u062A\u0634\u063A\u064A\u0644 \u0627\u0644\u062A\u0644\u0642\u0627\u0626\u064A:"),u.React.createElement(u.ReactNative.Text,{style:{color:"#dcddde",fontSize:14}},"- \u064A\u0639\u0645\u0644 \u0627\u0644\u0628\u0644\u0648\u0642\u0646 \u062A\u0644\u0642\u0627\u0626\u064A\u0627\u064B \u0639\u0646\u062F \u0641\u062A\u062D \u062F\u064A\u0633\u0643\u0648\u0631\u062F"),u.React.createElement(u.ReactNative.Text,{style:{color:"#dcddde",fontSize:14}},"- \u064A\u062A\u062D\u0642\u0642 \u0645\u0646 \u0648\u062C\u0648\u062F \u0643\u0648\u064A\u0633\u062A\u0627\u062A \u0648\u064A\u0628\u062F\u0623 \u0628\u062D\u0644\u0647\u0627"),u.React.createElement(u.ReactNative.Text,{style:{color:"#dcddde",fontSize:14}},"- \u064A\u062A\u0648\u0642\u0641 \u0628\u0639\u062F \u0625\u0646\u0647\u0627\u0621 \u062C\u0645\u064A\u0639 \u0627\u0644\u0643\u0648\u064A\u0633\u062A\u0627\u062A")),u.React.createElement(u.ReactNative.View,{style:{marginBottom:8}},u.React.createElement(u.ReactNative.Text,{style:{color:"#00ff7f",fontSize:16,marginBottom:4}},"\u2699\uFE0F \u0627\u0644\u0632\u0631 \u0627\u0644\u062C\u0627\u0646\u0628\u064A:"),u.React.createElement(u.ReactNative.Text,{style:{color:"#dcddde",fontSize:14}},"- \u0627\u0636\u063A\u0637 \u0639\u0644\u0649 \u{1F3AE} \u0641\u064A \u0634\u0631\u064A\u0637 \u0627\u0644\u0623\u0639\u0644\u0649"),u.React.createElement(u.ReactNative.Text,{style:{color:"#dcddde",fontSize:14}},"- \u0644\u062A\u0634\u063A\u064A\u0644 \u0627\u0644\u0643\u0648\u064A\u0633\u062A\u0627\u062A \u064A\u062F\u0648\u064A\u0627\u064B"),u.React.createElement(u.ReactNative.Text,{style:{color:"#dcddde",fontSize:14}},"- \u0623\u0648 \u0639\u0631\u0636 \u0627\u0644\u0633\u062C\u0644\u0627\u062A")),u.React.createElement(u.ReactNative.View,null,u.React.createElement(u.ReactNative.Text,{style:{color:"#ff6b81",fontSize:16,marginBottom:4}},"\u26A0\uFE0F \u0645\u0644\u0627\u062D\u0638\u0627\u062A:"),u.React.createElement(u.ReactNative.Text,{style:{color:"#dcddde",fontSize:14}},"- \u0627\u0644\u0633\u062C\u0644\u0627\u062A \u062A\u0645\u0633\u062D \u062A\u0644\u0642\u0627\u0626\u064A\u0627\u064B \u0639\u0646\u062F \u0625\u0639\u0627\u062F\u0629 \u0627\u0644\u062A\u062D\u0645\u064A\u0644"),u.React.createElement(u.ReactNative.Text,{style:{color:"#dcddde",fontSize:14}},"- \u062A\u0623\u0643\u062F \u0645\u0646 \u0627\u062A\u0635\u0627\u0644\u0643 \u0628\u0627\u0644\u0625\u0646\u062A\u0631\u0646\u062A"),u.React.createElement(u.ReactNative.Text,{style:{color:"#dcddde",fontSize:14}},"- \u0642\u062F \u064A\u0633\u062A\u063A\u0631\u0642 \u062D\u0644 \u0627\u0644\u0643\u0648\u064A\u0633\u062A\u0627\u062A \u0628\u0639\u0636 \u0627\u0644\u0648\u0642\u062A"))),u.React.createElement(u.ReactNative.TouchableOpacity,{onPress:function(){b.showToast("\u062A\u0645 \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0633\u062C\u0644\u0627\u062A",v.getAssetIDByName("ic_sync")),r()},style:{backgroundColor:"#7289da",paddingVertical:14,borderRadius:8,alignItems:"center",marginTop:16}},u.React.createElement(u.ReactNative.Text,{style:{color:"#fff",fontWeight:"bold",fontSize:16}},"\u{1F504} \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0633\u062C\u0644\u0627\u062A")))}const{getToken:S}=C.findByProps("getToken"),{showSimpleActionSheet:_}=C.findByProps("showSimpleActionSheet");s.storage.logs&&(s.storage.logs=[]);const i=function(e,t=!1){const a=`[${new Date().toLocaleTimeString()}] ${e}`;s.storage.logs||(s.storage.logs=[]),s.storage.logs.unshift(a),s.storage.logs.length>100&&s.storage.logs.pop(),t&&t(e,v.getAssetIDByName("ic_robot_24px")),console.log(a)},g="Discord-Android/305012;RNA",F={os:"Android",browser:"Discord Android",release_channel:"stable",client_version:"305012",os_version:"13",os_arch:"arm64-v8a",system_locale:"en-US",client_build_number:305012,device:"Pixel",manufacturer:"Google",model:"Pixel 7"},h=function(){return Buffer.from(JSON.stringify(F)).toString("base64")};async function y(e,t=3){for(let a=0;a<t;a++)try{return await e()}catch(n){if(a===t-1)throw n;await f(3e3)}throw new Error("Max retries reached")}function f(e){return new Promise(function(t){return setTimeout(t,e)})}async function E(e){return y(function(){return fetch("https://discord.com/api/v10/quests/@me",{headers:{Authorization:e,"User-Agent":g,"x-super-properties":h(),"Content-Type":"application/json"}}).then(function(t){return t.json()})})}async function k(e,t){await y(function(){return fetch(`https://discord.com/api/v10/quests/${t}/enroll`,{method:"POST",headers:{Authorization:e,"User-Agent":g,"x-super-properties":h(),"Content-Type":"application/json"},body:JSON.stringify({location:11,is_targeted:!1,metadata_raw:null})})})}async function B(e,t,a){return y(function(){return fetch(`https://discord.com/api/v10/quests/${t}/video-progress`,{method:"POST",headers:{Authorization:e,"User-Agent":g,"x-super-properties":h(),"Content-Type":"application/json"},body:JSON.stringify({timestamp:a})}).then(function(n){return n.json()})})}async function N(e,t,a,n){return y(function(){return fetch(`https://discord.com/api/v10/quests/${t}/heartbeat`,{method:"POST",headers:{Authorization:e,"User-Agent":g,"x-super-properties":h(),"Content-Type":"application/json"},body:JSON.stringify({application_id:a,terminal:n})}).then(function(r){return r.json()})})}async function $(e,t,a){const n=t.config.messages.quest_name,r=t.id,l=t.config.task_config.tasks[a],d=Object.keys(l)[0],o=l[d].target;let c=t.user_status?.progress?.[a]?.value||0,A=0;if(i(`\u0628\u062F\u0627\u064A\u0629 \u0627\u0644\u0645\u0647\u0645\u0629: ${n} - ${d}`,!0),d.includes("WATCH_VIDEO"))for(;c<o;){const p=await B(e,r,Math.min(o,c+7+Math.random()*3));if(c+=7,Date.now()-A>=1e4&&(i(`${n}: ${Math.min(c,o)}/${o} (\u0645\u062A\u0628\u0642\u064A: ${Math.max(0,o-c)})`),A=Date.now()),p.completed_at)break;await f(2e3+Math.random()*1e3)}else{for(;;){const p=await N(e,r,t.config.application.id,!1);if(c=p.progress?.[a]?.value||c,Date.now()-A>=1e4&&(i(`${n}: ${c}/${o} (\u0645\u062A\u0628\u0642\u064A: ${Math.max(0,o-c)})`),A=Date.now()),p.completed_at)break;await f(3e4+Math.random()*5e3)}await N(e,r,t.config.application.id,!0)}i(`\u0627\u0643\u062A\u0645\u0644\u062A \u0627\u0644\u0645\u0647\u0645\u0629: ${n} - ${d}`,!0)}async function z(e,t){try{const a=t.config.messages.quest_name;for(t.user_status?.enrolled_at||(i(`\u0627\u0644\u062A\u0633\u062C\u064A\u0644 \u0641\u064A \u0627\u0644\u0643\u0648\u064A\u0633\u062A: ${a}`,!0),await k(e,t.id));;){const n=((await E(e)).quests||[]).find(function(l){return l.id===t.id});if(!n||n.user_status?.completed_at){i(`\u0627\u0643\u062A\u0645\u0644 \u0627\u0644\u0643\u0648\u064A\u0633\u062A: ${a}`,!0);break}const r=Object.keys(n.config.task_config.tasks).filter(function(l,d){const o=n.config.task_config.tasks[d],c=Object.keys(o)[0],A=o[c].target;return(n.user_status?.progress?.[d]?.value||0)<A});if(r.length===0)break;await $(e,n,parseInt(r[0])),await f(3e3)}}catch(a){i(`\u062E\u0637\u0623 \u0641\u064A \u0645\u0639\u0627\u0644\u062C\u0629 \u0627\u0644\u0643\u0648\u064A\u0633\u062A: ${a.message}`)}}async function T(){try{const e=S();if(!e){i("\u0641\u0634\u0644 \u0641\u064A \u0627\u0644\u062D\u0635\u0648\u0644 \u0639\u0644\u0649 \u0627\u0644\u062A\u0648\u0643\u0646",!0);return}i("\u062C\u0627\u0631\u064A \u0627\u0644\u0628\u062D\u062B \u0639\u0646 \u0627\u0644\u0643\u0648\u064A\u0633\u062A\u0627\u062A...",!0);const t=((await E(e)).quests||[]).filter(function(a){const n=a.user_status?.completed_at,r=new Date(a.config.expires_at)<=new Date;return!n&&!r});if(t.length===0){i("\u0644\u0627 \u062A\u0648\u062C\u062F \u0643\u0648\u064A\u0633\u062A\u0627\u062A \u0645\u062A\u0627\u062D\u0629 \u062D\u0627\u0644\u064A\u0627\u064B",!0);return}i(`\u062A\u0645 \u0627\u0644\u0639\u062B\u0648\u0631 \u0639\u0644\u0649 ${t.length} \u0643\u0648\u064A\u0633\u062A`,!0);for(const a of t)await z(e,a),await f(5e3);i("\u062A\u0645 \u0625\u0643\u0645\u0627\u0644 \u062C\u0645\u064A\u0639 \u0627\u0644\u0643\u0648\u064A\u0633\u062A\u0627\u062A \u0628\u0646\u062C\u0627\u062D!",!0)}catch(e){i(`\u062E\u0637\u0623: ${e.message}`,!0)}}let w;var O={onLoad(){i("\u062A\u0645 \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0628\u0644\u0648\u0642\u0646 \u0628\u0646\u062C\u0627\u062D",!0),setTimeout(function(){T()},1e4),w=x.before("showUserProfile",function(e){const[t]=e;t?.userId||setTimeout(function(){const a=document.querySelectorAll('[class*="headerBar"] button');if(a.length>0){const n=a[a.length-1],r=document.createElement("button");r.innerHTML="\u{1F3AE}",r.style.cssText=`
            background: transparent;
            border: none;
            color: white;
            font-size: 20px;
            padding: 8px;
            cursor: pointer;
            margin-right: 8px;
          `,r.onclick=function(){_({key:"QuestActions",header:{title:"\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0643\u0648\u064A\u0633\u062A\u0627\u062A",onClose:function(){}},options:[{label:"\u062A\u0634\u063A\u064A\u0644 \u0627\u0644\u0643\u0648\u064A\u0633\u062A\u0627\u062A \u0627\u0644\u0622\u0646",onPress:function(){return T()}},{label:"\u0639\u0631\u0636 \u0627\u0644\u0633\u062C\u0644\u0627\u062A",onPress:function(){const l=window.open("","_blank");l&&l.document.write(`
                        <html>
                          <head>
                            <title>\u0633\u062C\u0644\u0627\u062A \u0627\u0644\u0643\u0648\u064A\u0633\u062A\u0627\u062A</title>
                            <style>
                              body {
                                background: #36393f;
                                color: white;
                                font-family: sans-serif;
                                padding: 20px;
                              }
                              .log {
                                padding: 8px;
                                border-bottom: 1px solid #444;
                                word-break: break-word;
                              }
                            </style>
                          </head>
                          <body>
                            <h1>\u0633\u062C\u0644\u0627\u062A \u0627\u0644\u0643\u0648\u064A\u0633\u062A\u0627\u062A</h1>
                            <div id="logs"></div>
                            <script>
                              const logs = ${JSON.stringify(s.storage.logs||[])};
                              const container = document.getElementById('logs');
                              logs.forEach(log => {
                                const div = document.createElement('div');
                                div.className = 'log';
                                div.textContent = log;
                                container.appendChild(div);
                              });
                            <\/script>
                          </body>
                        </html>
                      `)}},{label:"\u0645\u0633\u062D \u0627\u0644\u0633\u062C\u0644\u0627\u062A",onPress:function(){s.storage.logs=[],b.showToast("\u062A\u0645 \u0645\u0633\u062D \u0627\u0644\u0633\u062C\u0644\u0627\u062A")}}]})},document.querySelector(".quest-button")||(r.className="quest-button",n.parentNode?.insertBefore(r,n))}},1e3)})},onUnload(){i("\u062A\u0645 \u0625\u064A\u0642\u0627\u0641 \u0627\u0644\u0628\u0644\u0648\u0642\u0646",!0),w&&w(),s.storage.logs=[]},settings:D};return R.default=O,Object.defineProperty(R,"__esModule",{value:!0}),R})({},vendetta.plugin,vendetta.metro,vendetta.ui.toasts,vendetta.patcher,vendetta.ui.assets,vendetta.metro.common);
