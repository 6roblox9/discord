(function(f,p,r,e,h){"use strict";function b(){h.useProxy(r.storage);const a=r.storage.logs||[];return e.React.createElement(e.ReactNative.View,{style:{flex:1,backgroundColor:"#202225"}},e.React.createElement(e.ReactNative.View,{style:{padding:16,borderBottomWidth:1,borderBottomColor:"#2f3136"}},e.React.createElement(e.ReactNative.Text,{style:{color:"#fff",fontSize:20,fontWeight:"bold"}},"Quest Autocompleter Logs")),e.React.createElement(e.ReactNative.ScrollView,{style:{flex:1,padding:12},contentContainerStyle:{paddingBottom:20}},a.length===0?e.React.createElement(e.ReactNative.Text,{style:{color:"#8e9297",textAlign:"center",marginTop:20}},"No logs yet. Restart Discord to run tasks."):a.map(function(t,s){return e.React.createElement(e.ReactNative.View,{key:s,style:{marginBottom:8,flexDirection:"row"}},e.React.createElement(e.ReactNative.Text,{style:{color:"#72767d",fontFamily:"monospace",fontSize:12}},"[",t.time,"]"),e.React.createElement(e.ReactNative.Text,{style:{color:t.color,marginLeft:8,fontWeight:"500"}},t.message))})),e.React.createElement(e.ReactNative.TouchableOpacity,{onPress:function(){r.storage.logs=[]},style:{backgroundColor:"#f04747",margin:16,padding:12,borderRadius:8,alignItems:"center"}},e.React.createElement(e.ReactNative.Text,{style:{color:"#fff",fontWeight:"bold"}},"Clear Logs")))}const v=p.findByProps("getToken").getToken,g={os:"Windows",browser:"Discord Client",release_channel:"stable",client_version:"1.0.9215",os_version:"10.0.19045",os_arch:"x64",app_arch:"x64",system_locale:"en-US",has_client_mods:!1,client_launch_id:Math.random().toString(36),browser_user_agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) discord/1.0.9215 Chrome/138.0.7204.251 Electron/37.6.0 Safari/537.36",browser_version:"37.6.0",os_sdk_version:"19045",client_build_number:471091,native_build_number:72186,client_event_source:null,launch_signature:Math.random().toString(36),client_heartbeat_session_id:Math.random().toString(36),client_app_state:"focused"},y=btoa(JSON.stringify(g));function o(a,t){const s={time:new Date().toLocaleTimeString(),color:a,message:t};r.storage.logs||(r.storage.logs=[]),r.storage.logs.push(s)}async function l(a,t="GET",s){const i=v();return(await fetch(`https://discord.com/api/v10${a}`,{method:t,headers:{Authorization:i,"Content-Type":"application/json","x-super-properties":y,"User-Agent":g.browser_user_agent},body:s?JSON.stringify(s):void 0})).json()}async function w(){r.storage.logs=[],o("#36e333","Checking for quests...");try{const a=((await l("/quests/@me")).quests||[]).filter(function(t){return!t.user_status?.completed_at&&new Date(t.config.expires_at)>new Date});if(a.length===0){o("#faa81a","No active quests found.");return}o("#00bfff",`Found ${a.length} quests.`);for(const t of a){const s=t.config.messages.quest_name,i=t.id;t.user_status?.enrolled_at||(await l(`/quests/${i}/enroll`,"POST",{location:11,is_targeted:!1,metadata_raw:null}),o("#00ff7f",`Enrolled in: ${s}`));const m=Object.keys(t.config.task_config.tasks);for(const n of m){const _=t.config.task_config.tasks[n].target;let c=t.user_status?.progress?.[n]?.value||0;for(o("#ffeb3b",`Starting task: ${n} for ${s}`);c<_;)if(n.includes("WATCH_VIDEO")){const d=await l(`/quests/${i}/video-progress`,"POST",{timestamp:Math.min(_,c+7)});if(c+=7,d.completed_at)break;await new Promise(function(u){return setTimeout(u,2500)})}else{const d=await l(`/quests/${i}/heartbeat`,"POST",{application_id:t.config.application.id,terminal:!1});if(c=d.progress?.[n]?.value||c,d.completed_at)break;await new Promise(function(u){return setTimeout(u,3e4)})}o("#36e333",`Finished task: ${n}`)}}o("#36e333","All quests completed!")}catch(a){o("#ff4747",`Error: ${a.message}`)}}var R={onLoad(){w()},onUnload(){},settings:b};return f.default=R,Object.defineProperty(f,"__esModule",{value:!0}),f})({},vendetta.metro,vendetta.plugin,vendetta.metro.common,vendetta.storage);
