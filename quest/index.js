(function(d,p,o,a,x){"use strict";function h(){return x.useProxy(o.storage),a.React.createElement(a.ReactNative.ScrollView,{style:{flex:1,backgroundColor:"#2f3136"}},a.React.createElement(a.ReactNative.View,{style:{padding:16}},a.React.createElement(a.ReactNative.Text,{style:{color:"#fff",fontSize:18,fontWeight:"bold",marginBottom:12}},"Terminal Logs"),a.React.createElement(a.ReactNative.View,{style:{backgroundColor:"#1e1f22",borderRadius:8,padding:10,minHeight:400}},o.storage.logs&&o.storage.logs.length>0?o.storage.logs.map(function(t,e){return a.React.createElement(a.ReactNative.View,{key:e,style:{marginBottom:4}},a.React.createElement(a.ReactNative.Text,{style:{fontFamily:"monospace",fontSize:12}},a.React.createElement(a.ReactNative.Text,{style:{color:"#8e9297"}},"[",t.time,"] "),a.React.createElement(a.ReactNative.Text,{style:{color:t.color}},t.message)))}):a.React.createElement(a.ReactNative.Text,{style:{color:"#72767d",fontFamily:"monospace"}},"No activity...")),a.React.createElement(a.ReactNative.TouchableOpacity,{onPress:function(){o.storage.logs=[]},style:{marginTop:16,backgroundColor:"#5865f2",padding:12,borderRadius:8,alignItems:"center"}},a.React.createElement(a.ReactNative.Text,{style:{color:"#fff",fontWeight:"bold"}},"Clear Logs"))))}const v=p.findByProps("getToken").getToken;function g(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}const _="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) discord/1.0.9215 Chrome/138.0.7204.251 Electron/37.6.0 Safari/537.36",y={os:"Windows",browser:"Discord Client",release_channel:"stable",client_version:"1.0.9215",os_version:"10.0.19045",os_arch:"x64",app_arch:"x64",system_locale:"en-US",has_client_mods:!1,client_launch_id:g(),browser_user_agent:_,browser_version:"37.6.0",os_sdk_version:"19045",client_build_number:471091,native_build_number:72186,client_event_source:null,launch_signature:g(),client_heartbeat_session_id:g(),client_app_state:"focused"},m=btoa(JSON.stringify(y));function n(t,e){const s=new Date().toLocaleTimeString();o.storage.logs=[...o.storage.logs||[],{time:s,message:e,color:t}].slice(-100)}const f=function(t){return new Promise(function(e){return setTimeout(e,t)})};async function w(t,e=5){for(let s=0;s<e;s++)try{return await t()}catch{await f(3e3)}}async function l(t,e="GET",s){const c=v();return await w(function(){return fetch(t,{method:e,headers:{Authorization:c,"User-Agent":_,"x-super-properties":m,"Content-Type":"application/json"},body:s?JSON.stringify(s):void 0}).then(function(i){return i.json()})})}async function b(t,e){const s=t.config.messages.quest_name,c=t.id,i=t.config.task_config.tasks[e].target;let r=t.user_status?.progress?.[e]?.value||0;if(n("#ffff00",`${s} type: ${e}`),e.includes("WATCH_VIDEO"))for(;r<i;){const u=await l(`https://discord.com/api/v10/quests/${c}/video-progress`,"POST",{timestamp:Math.min(i,r+7+Math.random())});if(r+=7,n("#00ffff",`${s} ${Math.min(r,i)}/${i} remaining ${Math.max(0,i-r)}`),u.completed_at)break;await f(2e3)}else{for(;;){const u=await l(`https://discord.com/api/v10/quests/${c}/heartbeat`,"POST",{application_id:t.config.application.id,terminal:!1});if(r=u.progress?.[e]?.value||r,n("#00ffff",`${s} ${r}/${i} remaining ${Math.max(0,i-r)}`),u.completed_at)break;await f(3e4)}await l(`https://discord.com/api/v10/quests/${c}/heartbeat`,"POST",{application_id:t.config.application.id,terminal:!0})}n("#00ff00",`${s} ${e} completed`)}async function R(t){let e=t;for(e.user_status?.enrolled_at||await l(`https://discord.com/api/v10/quests/${e.id}/enroll`,"POST",{location:11,is_targeted:!1,metadata_raw:null});e=((await l("https://discord.com/api/v10/quests/@me")).quests||[]).find(function(s){return s.id===e.id}),!(!e||e.user_status?.completed_at);){const s=Object.keys(e.config.task_config.tasks).filter(function(c){const i=e.config.task_config.tasks[c].target;return(e.user_status?.progress?.[c]?.value||0)<i});if(!s.length)break;await b(e,s[0]),await f(3e3)}n("#00ff00",`${e.config.messages.quest_name} fully completed`)}async function T(){try{const t=await l("https://discord.com/api/v10/users/@me");n("#00ff00",`Logged ${t.username}`);const e=((await l("https://discord.com/api/v10/quests/@me")).quests||[]).filter(function(s){return!s.user_status?.completed_at&&new Date(s.config.expires_at)>new Date});n("#ffff00",`Quests ${e.length}`);for(const s of e)await R(s);n("#00ff00","All quests finished")}catch(t){n("#ff0000",`Error: ${t.message}`)}}var $={onLoad(){o.storage.logs=[],T()},onUnload(){},settings:h};return d.default=$,Object.defineProperty(d,"__esModule",{value:!0}),d})({},vendetta.metro,vendetta.plugin,vendetta.metro.common,vendetta.storage);
