(function(l,w,y,n,f){"use strict";function h(){const t=f.storage.logs||[];return n.React.createElement(n.ReactNative.ScrollView,{style:{flex:1,backgroundColor:"#2f3136",padding:16}},n.React.createElement(n.ReactNative.View,{style:{marginBottom:16}},n.React.createElement(n.ReactNative.Text,{style:{color:"#fff",fontSize:18,fontWeight:"bold"}},"Quest Auto Solver"),n.React.createElement(n.ReactNative.Text,{style:{color:"#b9bbbe",marginTop:4}},"Runs once on Discord launch")),n.React.createElement(n.ReactNative.TouchableOpacity,{onPress:function(){return f.storage.logs=[]},style:{backgroundColor:"#5865f2",padding:12,borderRadius:8,alignItems:"center",marginBottom:16}},n.React.createElement(n.ReactNative.Text,{style:{color:"#fff",fontWeight:"bold"}},"Clear Logs")),n.React.createElement(n.ReactNative.View,null,t.length===0&&n.React.createElement(n.ReactNative.Text,{style:{color:"#b9bbbe"}},"No logs"),t.map(function(a,e){return n.React.createElement(n.ReactNative.Text,{key:e,style:{color:"#fff",marginBottom:4}},a)})))}const b="Discord-Android/305012;RNA",d=function(t){return new Promise(function(a){return setTimeout(a,t)})};async function u(t,a,e="GET",i){const r=await fetch(t,{method:e,headers:{Authorization:a,"User-Agent":b,"Content-Type":"application/json"},body:i?JSON.stringify(i):void 0});if(!r.ok)throw new Error(String(r.status));return r.json()}async function g(t){return((await u("https://discord.com/api/v10/quests/@me",t)).quests||[]).filter(function(a){return!a.user_status?.completed_at&&new Date(a.config.expires_at)>new Date})}async function R(t,a){await u(`https://discord.com/api/v10/quests/${a}/enroll`,t,"POST",{location:11,is_targeted:!1,metadata_raw:null})}async function _(t,a,e){return u(`https://discord.com/api/v10/quests/${a}/video-progress`,t,"POST",{timestamp:e})}async function p(t,a,e,i){return u(`https://discord.com/api/v10/quests/${a}/heartbeat`,t,"POST",{application_id:e,terminal:i})}async function T(t,a){for(a.user_status?.enrolled_at||await R(t,a.id);;){const e=(await g(t)).find(function(s){return s.id===a.id});if(!e||e.user_status?.completed_at)break;const i=Object.keys(e.config.task_config.tasks).filter(function(s){const O=e.config.task_config.tasks[s].target;return(e.user_status?.progress?.[s]?.value||0)<O});if(!i.length)break;const r=i[0],v=e.config.task_config.tasks[r].target;let c=e.user_status?.progress?.[r]?.value||0;if(r.includes("WATCH_VIDEO"))for(;c<v;)await _(t,e.id,Math.min(v,c+6+Math.random()*4)),c+=6,await d(2e3+Math.random()*2e3);else{for(;;){const s=await p(t,e.id,e.config.application.id,!1);if(c=s.progress?.[r]?.value||c,s.completed_at)break;await d(25e3+Math.random()*1e4)}await p(t,e.id,e.config.application.id,!0)}}}async function k(t){f.storage.logs=[];const a=await g(t);if(!a.length)return!1;for(const e of a)await T(t,e),await d(3e3);return!0}const N=w.findByProps("getToken").getToken;let o=!1;async function E(){if(o)return;o=!0;const t=N();if(!t){o=!1;return}await k(t)||y.showToast("No quests found"),o=!1}var m={onLoad(){E()},onUnload(){o=!1},settings:h};return l.default=m,Object.defineProperty(l,"__esModule",{value:!0}),l})({},vendetta.metro,vendetta.ui.toasts,vendetta.metro.common,vendetta.plugin);
