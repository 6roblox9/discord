(function(d,p,r,a,_){"use strict";function x(){return _.useProxy(r.storage),a.React.createElement(a.ReactNative.ScrollView,{style:{flex:1,backgroundColor:"#2f3136"}},a.React.createElement(a.ReactNative.View,{style:{padding:16}},a.React.createElement(a.ReactNative.Text,{style:{color:"#fff",fontSize:18,fontWeight:"bold",marginBottom:12}},"Terminal Logs"),a.React.createElement(a.ReactNative.View,{style:{backgroundColor:"#1e1f22",borderRadius:8,padding:10,minHeight:400}},r.storage.logs&&r.storage.logs.length>0?r.storage.logs.map(function(t,e){return a.React.createElement(a.ReactNative.View,{key:e,style:{marginBottom:4}},a.React.createElement(a.ReactNative.Text,{style:{fontFamily:"monospace",fontSize:12}},a.React.createElement(a.ReactNative.Text,{style:{color:"#8e9297"}},"[",t.time,"] "),a.React.createElement(a.ReactNative.Text,{style:{color:t.color}},t.message)))}):a.React.createElement(a.ReactNative.Text,{style:{color:"#72767d",fontFamily:"monospace"}},"No activity...")),a.React.createElement(a.ReactNative.TouchableOpacity,{onPress:function(){r.storage.logs=[]},style:{marginTop:16,backgroundColor:"#5865f2",padding:12,borderRadius:8,alignItems:"center"}},a.React.createElement(a.ReactNative.Text,{style:{color:"#fff",fontWeight:"bold"}},"Clear Logs"))))}const h=p.findByProps("getToken").getToken;function u(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}const g="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) discord/1.0.9215 Chrome/138.0.7204.251 Electron/37.6.0 Safari/537.36";function v(){const t={os:"Windows",browser:"Discord Client",release_channel:"stable",client_version:"1.0.9215",os_version:"10.0.19045",os_arch:"x64",app_arch:"x64",system_locale:"en-US",has_client_mods:!1,client_launch_id:u(),browser_user_agent:g,browser_version:"37.6.0",os_sdk_version:"19045",client_build_number:471091,native_build_number:72186,client_event_source:null,launch_signature:u(),client_heartbeat_session_id:u(),client_app_state:"focused"};return btoa(JSON.stringify(t))}const y=v();function o(t,e){const s=new Date().toLocaleTimeString();r.storage.logs=[...r.storage.logs||[],{time:s,message:e,color:t}].slice(-50)}const f=function(t){return new Promise(function(e){return setTimeout(e,t)})};async function w(t,e=5){for(let s=0;s<e;s++)try{return await t()}catch{await f(3e3)}}async function c(t,e="GET",s){return await w(async function(){const i=await fetch(t,{method:e,headers:{Authorization:h(),"User-Agent":g,"x-super-properties":y,"Content-Type":"application/json"},body:s?JSON.stringify(s):void 0});if(!i.ok)throw new Error(`HTTP ${i.status}`);return await i.json()})}async function b(t,e){const s=t.config.messages.quest_name,i=t.config.task_config.tasks[e].target;let n=t.user_status?.progress?.[e]?.value||0;if(o("#ffff33",`${s} type: ${e}`),e.includes("WATCH_VIDEO"))for(;n<i;){const l=await c(`https://discord.com/api/v10/quests/${t.id}/video-progress`,"POST",{timestamp:Math.min(i,n+7+Math.random())});if(n+=7,o("#00ffff",`${s} ${Math.min(n,i)}/${i}`),l?.completed_at)break;await f(2e3)}else{for(;;){const l=await c(`https://discord.com/api/v10/quests/${t.id}/heartbeat`,"POST",{application_id:t.config.application.id,terminal:!1});if(l&&l.progress&&l.progress[e]&&(n=l.progress[e].value),o("#00ffff",`${s} ${n}/${i}`),l?.completed_at||n>=i)break;await f(3e4)}await c(`https://discord.com/api/v10/quests/${t.id}/heartbeat`,"POST",{application_id:t.config.application.id,terminal:!0})}o("#43b581",`${s} ${e} completed`)}async function m(t){let e=t;for(e.user_status?.enrolled_at||await c(`https://discord.com/api/v10/quests/${e.id}/enroll`,"POST",{location:11,is_targeted:!1,metadata_raw:null});e=(await c("https://discord.com/api/v10/quests/@me")).quests.find(function(s){return s.id===e.id}),!(!e||e.user_status?.completed_at);){const s=Object.keys(e.config.task_config.tasks).filter(function(i){const n=e.config.task_config.tasks[i].target;return(e.user_status?.progress?.[i]?.value||0)<n});if(!s.length)break;await b(e,s[0]),await f(3e3)}}async function R(){try{const t=await c("https://discord.com/api/v10/users/@me");o("#43b581",`Logged ${t.username}`);const e=((await c("https://discord.com/api/v10/quests/@me")).quests||[]).filter(function(s){return!s.user_status?.completed_at&&new Date(s.config.expires_at)>new Date});o("#ffff33",`Quests ${e.length}`);for(const s of e)await m(s);o("#43b581","All quests finished")}catch(t){o("#f04747",`Error: ${t.message}`)}}var T={onLoad(){r.storage.logs=[],R()},onUnload(){},settings:x};return d.default=T,Object.defineProperty(d,"__esModule",{value:!0}),d})({},vendetta.metro,vendetta.plugin,vendetta.metro.common,vendetta.storage);
