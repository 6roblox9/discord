(function(s,t,c,d){"use strict";t.findByProps("dispatch","subscribe");const u=t.findByProps("getCurrentUser");d.storage.platform??="desktop";const i=function(n,o){const r=d.storage.platform??"desktop";if(n||o===u.getCurrentUser()?.id)switch(r){case"desktop":return{browser:"Discord Client",vcIcon:0};case"web":return{browser:"Discord Web",vcIcon:0};case"ios":return{browser:"Discord iOS",vcIcon:1};case"android":return{browser:"Discord Android",vcIcon:1};case"xbox":return{browser:"Discord Embedded",vcIcon:2};case"playstation":return{browser:"Discord Embedded",vcIcon:3};default:return null}return null};let a=null,l=null;var f={onLoad(){const n=t.findByProps("_doIdentify");n?._doIdentify&&(a=c.after("_doIdentify",n,function(r,e){try{e?.properties&&(e.properties={...e.properties,...i(!0)})}catch{}return e}));const o=t.findByProps("CallTile");o?.CallTile?.memo&&(l=c.after("memo",o.CallTile,function([r]){try{const e=i(!1,r?.participantUserId);e?.vcIcon!=null&&(r.platform=e.vcIcon)}catch{}}))},onUnload(){a?.(),l?.()},settings:require("./settings").default};return s.default=f,Object.defineProperty(s,"__esModule",{value:!0}),s})({},vendetta.metro,vendetta.patcher,vendetta.plugin);
